<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/bootstrap-5.3.3-dist/css/bootstrap.min.css" />
  <script src="http://localhost:35729/livereload.js"></script>
  <title>Fixed Right Navbar</title>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
  <header class="header-section">
    <div class="d-flex justify-content-between align-items-center p-3">
      <div class="d-flex align-items-center">
        <a class="text-decoration-none" href="/">
          <img src="/default/images/logo.jpg" alt="Shop Handmade" class="me-2" width="75" />
        </a>

        <a class="text-decoration-none text-black" href="/">
          <h2 class="mb-0">Shop Handmade</h2>
        </a>
      </div>
      <div class="d-flex align-items-center">
        <div>
          <a href="/home">
            <button class="btn">Trang chủ</button>
          </a>
        </div>

        <div>
          <a href="/products">
            <button class="btn">Sản phẩm</button>
          </a>
        </div>
        <div>
          <a href="/contacts">
            <button class="btn">Liên hệ</button>
          </a>
        </div>

        <div>
          <span th:if="${session.loggedInUser != null}">
            <a href="/carts">
              <button class="btn">Giỏ hàng</button>
            </a>
          </span>
          <span th:if="${session.loggedInUser != null}">
            <a href="/orders">
              <button class="btn">Đơn hàng</button>
            </a>
          </span>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill"
            viewBox="0 0 16 16">
            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6" />
          </svg>

          <!-- Nếu người dùng đã đăng nhập -->
          <span th:if="${session.loggedInUser != null}">
            Xin chào,
            <a th:href="@{/user-detail}" class="text-decoration-none">
              <b th:text="${session.loggedInUser.email}"></b>!
            </a>

            <a th:href="@{/logout}" onclick="confirmLogout(event)" class="btn btn-danger">Đăng xuất</a>
          </span>

          <!-- Nếu người dùng chưa đăng nhập -->
          <span th:if="${session.loggedInUser == null}">
            <a class="text-decoration-none text-black btn btn-outline-primary" href="/login">
              <span>Đăng nhập</span>
            </a>
            <a class="text-decoration-none text-black btn btn-outline-primary" href="/register">
              <span>Đăng ký</span>
            </a>
          </span>
        </div>
      </div>
    </div>
  </header>
</body>
<script>
  function confirmLogout(event) {
    // Ngừng hành động mặc định (chuyển hướng đến /logout ngay lập tức)
    event.preventDefault();

    if (confirm("Bạn có chắc chắn muốn đăng xuất?")) {
      window.location.href = event.target.getAttribute("href");
    }
  }
</script>

</html>