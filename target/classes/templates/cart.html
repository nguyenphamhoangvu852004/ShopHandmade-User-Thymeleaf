<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="https://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{default/layout}">

<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/bootstrap-5.3.3-dist/css/bootstrap.min.css" />
    <title>Gi·ªè h√†ng</title>
</head>

<body>
    <div layout:fragment="main-content" class="container mt-4">
        <h1 class="text-center mb-4">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h1>

        <div th:if="${cart != null and not #lists.isEmpty(cart)}">
            <table class="table table-striped table-bordered text-center">
                <thead class="table-dark">
                    <tr>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>M√¥ t·∫£</th>
                        <th>Gi√°</th>
                        <th>Danh m·ª•c</th>
                        <th>T·ªìn kho</th>
                        <th>S·ªë l∆∞·ª£ng</th>
                        <th>H√¨nh ·∫£nh</th>
                        <th>Ch·ª©c nƒÉng</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="cartItem : ${cart}">
                        <td th:text="${cartItem.product.name}"></td>
                        <td th:text="${cartItem.product.description}"></td>
                        <td th:text="${#numbers.formatInteger(cartItem.product.price, 0, 'COMMA') + ' ‚Ç´'}"></td>
                        <td th:text="${cartItem.product.category} ?: 'Kh√¥ng c√≥ danh m·ª•c'"></td>
                        <td th:text="${cartItem.product.inventory.stock}"></td>
                        <td>
                            <form th:action="@{/cart/quantity/{id}(id=${cartItem.product.id})}" method="post">
                                <button type="submit" name="action" value="decrease"
                                    class="btn btn-sm btn-secondary">-</button>
                                <span th:text="${cartItem.quantity}" class="mx-2"></span>
                                <button type="submit" name="action" value="increase"
                                    class="btn btn-sm btn-primary">+</button>
                            </form>
                        </td>

                        <td>
                            <img th:if="${not #lists.isEmpty(cartItem.product.images)}"
                                th:src="${cartItem.product.images[0].src}" alt="H√¨nh s·∫£n ph·∫©m"
                                class="img-fluid rounded shadow-sm" width="120" />
                        </td>
                        <td>
                            <form th:action="@{/cart/remove/{id}(id=${cartItem.product.id})}" method="post">
                                <button type="submit" class="btn btn-danger">Xo√°</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <p th:if="${cart == null or #lists.isEmpty(cart)}" class="text-center text-danger fs-4">
            üõí Gi·ªè h√†ng tr·ªëng!
        </p>
    </div>

    <script src="/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>